\doxysection{src/graphics/bmprint.c File Reference}
\hypertarget{bmprint_8c}{}\label{bmprint_8c}\index{src/graphics/bmprint.c@{src/graphics/bmprint.c}}
{\ttfamily \#include "{}bmprint.\+h"{}}\newline
{\ttfamily \#include $<$stdarg.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$mos\+\_\+api.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include "{}../maths/xitoa.\+h"{}}\newline
{\ttfamily \#include "{}../vdp/bitmaps.\+h"{}}\newline
{\ttfamily \#include "{}../vdp/graphics.\+h"{}}\newline
Include dependency graph for bmprint.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bmprint_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{bmprint_8c_a7bb7c99ccc6f61452831abf824f73ad6}{load\+\_\+font\+\_\+def}} (char \texorpdfstring{$\ast$}{*}font\+\_\+def, \mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}font)
\item 
uint8\+\_\+t \mbox{\hyperlink{bmprint_8c_a867b981d550b09df515a4959bccbfea0}{bm\+\_\+load\+\_\+font}} (char \texorpdfstring{$\ast$}{*}font\+\_\+def, \mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}font)
\begin{DoxyCompactList}\small\item\em Loads a font definition off the SD card and turns it into a font structure used by the print routines. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bmprint_8c_a36c02cc37ebf25cf04b23fdc54d95311}{bm\+\_\+put\+\_\+char}} (\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}font, int16\+\_\+t screenx, int16\+\_\+t screeny, char c)
\begin{DoxyCompactList}\small\item\em Prints a single character on the screen using the supplied font. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bmprint_8c_a28232fb3c61fb6079f6189bad4c90116}{bm\+\_\+put\+\_\+string}} (\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}font, int16\+\_\+t screenx, int16\+\_\+t screeny, char \texorpdfstring{$\ast$}{*}s)
\begin{DoxyCompactList}\small\item\em Draws a string of characters on the screen, spaced apart an appropriate amount. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{bmprint_8c_aa36ee98d8335d26bbcdd7238a1e663b3}{bm\+\_\+printf}} (\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}font, int16\+\_\+t screenx, int16\+\_\+t screeny, char \texorpdfstring{$\ast$}{*}format,...)
\begin{DoxyCompactList}\small\item\em An implementation of printf() style text printing. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{bmprint_8c_a867b981d550b09df515a4959bccbfea0}\index{bmprint.c@{bmprint.c}!bm\_load\_font@{bm\_load\_font}}
\index{bm\_load\_font@{bm\_load\_font}!bmprint.c@{bmprint.c}}
\doxysubsubsection{\texorpdfstring{bm\_load\_font()}{bm\_load\_font()}}
{\footnotesize\ttfamily \label{bmprint_8c_a867b981d550b09df515a4959bccbfea0} 
uint8\+\_\+t bm\+\_\+load\+\_\+font (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{font\+\_\+def}{, }\item[{\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}}]{font}{}\end{DoxyParamCaption})}



Loads a font definition off the SD card and turns it into a font structure used by the print routines. 

After using the make\+\_\+font.\+py tool use this function to load the resulting data file into your program. You need to do this so the rest of these text printing routines will work.

Currently this function will make the program quit if it encounters loading errors since I wasn\textquotesingle{}t sure how to report errors in loading things to do with the text printing routines... If your game can\textquotesingle{}t load an asset it should probably quit.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em font\+\_\+def} & The file generated by make\+\_\+font.\+py \\
\hline
\mbox{\texttt{ out}}  & {\em font} & Pass in a pointer to where you want the definition storing, memory will be allocated. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 on success, 1 on failure. 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bmprint_8c_a867b981d550b09df515a4959bccbfea0_cgraph}
\end{center}
\end{figure}
\Hypertarget{bmprint_8c_aa36ee98d8335d26bbcdd7238a1e663b3}\index{bmprint.c@{bmprint.c}!bm\_printf@{bm\_printf}}
\index{bm\_printf@{bm\_printf}!bmprint.c@{bmprint.c}}
\doxysubsubsection{\texorpdfstring{bm\_printf()}{bm\_printf()}}
{\footnotesize\ttfamily \label{bmprint_8c_aa36ee98d8335d26bbcdd7238a1e663b3} 
void bm\+\_\+printf (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}}]{font}{, }\item[{int16\+\_\+t}]{screenx}{, }\item[{int16\+\_\+t}]{screeny}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{format}{, }\item[{}]{...}{}\end{DoxyParamCaption})}



An implementation of printf() style text printing. 

This is a basic implementation of printf(), it understands the following control characters c -\/ Character d -\/ Integer x -\/ Hexadecimal s -\/ String

Use it to print hexadecimal characters to your display, or to make nicely formatted score output, etc.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em font} & The font definition created by \doxylink{bmprint_8h_a867b981d550b09df515a4959bccbfea0}{bm\+\_\+load\+\_\+font()}. \\
\hline
\mbox{\texttt{ in}}  & {\em screenx} & The X position of the first character. \\
\hline
\mbox{\texttt{ in}}  & {\em screeny} & The Y position of the first character. \\
\hline
\mbox{\texttt{ in}}  & {\em format} & The NULL-\/terminated printf() style format string. \\
\hline
\mbox{\texttt{ in}}  & {\em varargs} & Pass in variables and other strings as appropriate. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bmprint_8c_aa36ee98d8335d26bbcdd7238a1e663b3_cgraph}
\end{center}
\end{figure}
\Hypertarget{bmprint_8c_a36c02cc37ebf25cf04b23fdc54d95311}\index{bmprint.c@{bmprint.c}!bm\_put\_char@{bm\_put\_char}}
\index{bm\_put\_char@{bm\_put\_char}!bmprint.c@{bmprint.c}}
\doxysubsubsection{\texorpdfstring{bm\_put\_char()}{bm\_put\_char()}}
{\footnotesize\ttfamily \label{bmprint_8c_a36c02cc37ebf25cf04b23fdc54d95311} 
void bm\+\_\+put\+\_\+char (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}}]{font}{, }\item[{int16\+\_\+t}]{screenx}{, }\item[{int16\+\_\+t}]{screeny}{, }\item[{char}]{c}{}\end{DoxyParamCaption})}



Prints a single character on the screen using the supplied font. 

Uses VDP bitmaps to place a single character on the screen. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em font} & The font to use, see \doxylink{bmprint_8h_a867b981d550b09df515a4959bccbfea0}{bm\+\_\+load\+\_\+font()}. \\
\hline
\mbox{\texttt{ in}}  & {\em screenx} & The X position of the character. \\
\hline
\mbox{\texttt{ in}}  & {\em screeny} & The Y position of the character. \\
\hline
\mbox{\texttt{ in}}  & {\em c} & The character to print. If not found in the font it will be subsituted by an error char. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bmprint_8c_a36c02cc37ebf25cf04b23fdc54d95311_cgraph}
\end{center}
\end{figure}
\Hypertarget{bmprint_8c_a28232fb3c61fb6079f6189bad4c90116}\index{bmprint.c@{bmprint.c}!bm\_put\_string@{bm\_put\_string}}
\index{bm\_put\_string@{bm\_put\_string}!bmprint.c@{bmprint.c}}
\doxysubsubsection{\texorpdfstring{bm\_put\_string()}{bm\_put\_string()}}
{\footnotesize\ttfamily \label{bmprint_8c_a28232fb3c61fb6079f6189bad4c90116} 
void bm\+\_\+put\+\_\+string (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}}]{font}{, }\item[{int16\+\_\+t}]{screenx}{, }\item[{int16\+\_\+t}]{screeny}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{s}{}\end{DoxyParamCaption})}



Draws a string of characters on the screen, spaced apart an appropriate amount. 

This is equivalent to puts() in POSIX. Feed it a string, it\textquotesingle{}ll print it. Performs a rudimentary attempt at wrapping text at the screen edge.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em font} & The font definition created by \doxylink{bmprint_8h_a867b981d550b09df515a4959bccbfea0}{bm\+\_\+load\+\_\+font()}. \\
\hline
\mbox{\texttt{ in}}  & {\em screenx} & The X position of the first character. \\
\hline
\mbox{\texttt{ in}}  & {\em screeny} & The Y position of the first character. \\
\hline
\mbox{\texttt{ in}}  & {\em s} & The NULL-\/terminated ASCII string to print. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{bmprint_8c_a28232fb3c61fb6079f6189bad4c90116_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{bmprint_8c_a28232fb3c61fb6079f6189bad4c90116_icgraph}
\end{center}
\end{figure}
\Hypertarget{bmprint_8c_a7bb7c99ccc6f61452831abf824f73ad6}\index{bmprint.c@{bmprint.c}!load\_font\_def@{load\_font\_def}}
\index{load\_font\_def@{load\_font\_def}!bmprint.c@{bmprint.c}}
\doxysubsubsection{\texorpdfstring{load\_font\_def()}{load\_font\_def()}}
{\footnotesize\ttfamily \label{bmprint_8c_a7bb7c99ccc6f61452831abf824f73ad6} 
void load\+\_\+font\+\_\+def (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{font\+\_\+def}{, }\item[{\mbox{\hyperlink{struct_font}{Font}} \texorpdfstring{$\ast$}{*}}]{font}{}\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=286pt]{bmprint_8c_a7bb7c99ccc6f61452831abf824f73ad6_icgraph}
\end{center}
\end{figure}
